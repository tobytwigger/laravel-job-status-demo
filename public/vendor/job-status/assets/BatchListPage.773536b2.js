import{c as R,Q as I,b as U,d as q}from"./index.9e71d0d5.js";import{Q as o,b as p,c as g,d as $}from"./QItem.e2c1a51d.js";import{h as z}from"./QPagination.b7890629.js";import{Q as f,R as P}from"./QBtn.765c16fc.js";import{Q as T}from"./QPage.d4ad0916.js";import{_ as r}from"./StatusCount.155fe4f6.js";import{d as m}from"./dayjs.min.e93d8b35.js";import{l as j}from"./localizedFormat.efb21b5e.js";import{r as D}from"./relativeTime.88dbddbc.js";import{H as F,c as S,I as l,J as i,K as t,d as e,M as _,N as V,U as A,P as x,r as v,w as E,o as H,k as M,Q as u,F as J,R as K,L as G,A as C}from"./index.e74ab796.js";import"./render.b530c45a.js";import"./index.b7f28e66.js";import"./format.a33550d6.js";import"./QAvatar.81d43982.js";const O={class:"text-weight-medium"},W={class:"text-grey-8 q-gutter-xs"},X=F({__name:"BatchListItem",props:{batch:null},setup(Q){const a=Q;m.extend(D),m.extend(j);const c=S(()=>m().to(a.batch.created_at)),s=S(()=>a.batch.name!==null&&a.batch.name!==""?a.batch.name:"Batch dispatched at "+m(a.batch.created_at).format("L LTS"));return(h,k)=>(l(),i(g,{clickable:"",to:{path:"/batch/"+a.batch.id}},{default:t(()=>[e(o,{avatar:"",top:""},{default:t(()=>[e(f,{name:"group_work",color:"black",size:"34px"})]),_:1}),e(o,{top:"",class:"col-2 gt-sm"},{default:t(()=>[e(p,{class:"q-mt-sm"},{default:t(()=>[_(V(A(c)),1)]),_:1})]),_:1}),e(o,{top:""},{default:t(()=>[e(p,{lines:"1"},{default:t(()=>[x("span",O,V(A(s)),1)]),_:1}),e(p,{caption:"",lines:"5"},{default:t(()=>[e(r,{count:a.batch.queued,label:"Queued",color:"primary"},null,8,["count"]),e(r,{count:a.batch.started,label:"Running",color:"info"},null,8,["count"]),e(r,{count:a.batch.cancelled,label:"Cancelled",color:"warning"},null,8,["count"]),e(r,{count:a.batch.failed,label:"Failed",color:"negative"},null,8,["count"]),e(r,{count:a.batch.succeeded,label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(o,{top:"",side:""},{default:t(()=>[x("div",W,[e(f,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),Y={key:0},Z={class:"q-pa-lg flex flex-center"},ee={key:1},ae={key:2},he=F({__name:"BatchListPage",setup(Q){const a=v(null),c=v(1);E(c,(n,b)=>{h()});const s=v(null);function h(){s.value!==null&&s.value.stop(),s.value=R.batches.search().page(c.value).bypassAuth().listen().onUpdated(n=>a.value=n).start()}H(()=>h()),M(()=>{s.value!==null&&s.value.stop()});function k(n){return n.batch_id}return(n,b)=>(l(),i(T,{class:"justify-evenly",padding:""},{default:t(()=>[e(U,null,{default:t(()=>[e(I,{icon:"list",to:"/batch",label:"Batches"}),e(I,{to:"/batch",label:"List Batches"})]),_:1}),e($,{class:"rounded-borders q-pa-lg"},{default:t(()=>{var y,B,L,w,N;return[e(p,{header:""},{default:t(()=>[_("All Batches")]),_:1}),((y=a.value)==null?void 0:y.total)>0?(l(),u("div",Y,[e(q),(l(!0),u(J,null,K((L=(B=a.value)==null?void 0:B.data)!=null?L:[],d=>(l(),u("div",{key:k(d)},[e(X,{batch:d},null,8,["batch"]),e(q)]))),128)),x("div",Z,[((w=a.value)==null?void 0:w.total)>0?(l(),i(z,{key:0,input:"","model-value":a.value.current_page,"onUpdate:modelValue":b[0]||(b[0]=d=>c.value=d),max:a.value.last_page},null,8,["model-value","max"])):G("",!0)])])):((N=a.value)==null?void 0:N.total)===0?(l(),u("div",ee,[C((l(),i(g,{clickable:""},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(f,{color:"negative",name:"warning"})]),_:1}),e(o,null,{default:t(()=>[_("No batches found")]),_:1})]),_:1})),[[P]])])):(l(),u("div",ae,[C((l(),i(g,{clickable:""},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(f,{color:"primary",name:"sync"})]),_:1}),e(o,null,{default:t(()=>[_("Loading")]),_:1})]),_:1})),[[P]])]))]}),_:1})]),_:1}))}});export{he as default};
