import{c as w,Q as S,a as C,b as y}from"./index.637ea310.js";import{Q as k,b as f,c as B,d as z}from"./QItem.c43cac6b.js";import{Q as R}from"./QPage.4bb22602.js";import{Q as m}from"./use-router-link.9a48f7d2.js";import{Q as L}from"./QCircularProgress.f5416614.js";import{Q as i}from"./QChip.ee8c1a51.js";import{S as p}from"./api.9a3f3035.js";import{d as x}from"./dayjs.min.3d4e4043.js";import{r as N}from"./relativeTime.280b640a.js";import{J as v,c as Q,K as a,L as r,M as t,d as s,$ as n,N as I,O as l,P as o,Q as c,r as P,k as V,R as b,S as $,F as j}from"./index.6030dd21.js";import"./render.ffb77abb.js";import"./index.b7f28e66.js";import"./format.801e7424.js";const q={class:"text-weight-medium"},F={class:"text-grey-8"},M={class:"text-grey-8 q-gutter-xs"},T=v({__name:"NoContextTrackedRunListItem",props:{trackedRun:null},setup(h){const e=h;x.extend(N);const g=Q(()=>x().to(e.trackedRun.created_at)),u=Q(()=>{let _=1,d=e.trackedRun;for(;d.parent!==null;)d=d.parent,_++;return _});return(_,d)=>(a(),r(B,{clickable:"",to:{path:"/run/"+e.trackedRun.id}},{default:t(()=>[s(k,{avatar:"",top:""},{default:t(()=>[e.trackedRun.status===n(p).Queued?(a(),r(m,{key:0,name:"hourglass_top",color:"black",size:"34px"})):e.trackedRun.status===n(p).Started?(a(),r(L,{key:1,"show-value":"",value:e.trackedRun.percentage,rounded:"",size:"34px",class:"q-ma-md"},null,8,["value"])):e.trackedRun.status===n(p).Succeeded?(a(),r(m,{key:2,name:"done",color:"black",size:"34px"})):e.trackedRun.status===n(p).Failed?(a(),r(m,{key:3,name:"close",color:"black",size:"34px"})):e.trackedRun.status===n(p).Cancelled?(a(),r(m,{key:4,name:"not_interested",color:"black",size:"34px"})):I("",!0)]),_:1}),s(k,{top:"",class:"col-2 gt-sm"},{default:t(()=>[s(f,{class:"q-mt-sm"},{default:t(()=>[l(o(n(g)),1)]),_:1})]),_:1}),s(k,{top:""},{default:t(()=>[s(f,{lines:"1"},{default:t(()=>[c("span",q,o(e.trackedRun.alias),1),c("span",F," - "+o(e.trackedRun.status),1)]),_:1}),s(f,{caption:""},{default:t(()=>[c("span",null,[e.trackedRun.messages.length===0?(a(),r(i,{key:0,dense:"",icon:"chat"},{default:t(()=>[l("Messages: "+o(e.trackedRun.messages.length),1)]),_:1})):(a(),r(i,{key:1,dense:"",color:"blue","text-color":"white",icon:"chat"},{default:t(()=>[l(" Messages: "+o(e.trackedRun.messages.length),1)]),_:1}))]),c("span",null,[e.trackedRun.signals.length===0?(a(),r(i,{key:0,dense:"",icon:"sensors"},{default:t(()=>[l("Signals: "+o(e.trackedRun.signals.length),1)]),_:1})):(a(),r(i,{key:1,dense:"",color:"red","text-color":"white",icon:"sensors"},{default:t(()=>[l(" Signals: "+o(e.trackedRun.signals.length),1)]),_:1}))]),c("span",null,[n(u)===1?(a(),r(i,{key:0,dense:"",icon:"replay"},{default:t(()=>[l("Retries: "+o(n(u)-1),1)]),_:1})):(a(),r(i,{key:1,dense:"",color:"orange","text-color":"white",icon:"replay"},{default:t(()=>[l(" Retries: "+o(n(u)-1),1)]),_:1}))])]),_:1})]),_:1}),s(k,{top:"",side:""},{default:t(()=>[c("div",M,[s(m,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),A={class:"row"},E={class:"col-12"},ae=v({__name:"HistoryPage",setup(h){const e=P(null);let g=w.runs.search().bypassAuth().listen().onUpdated(u=>e.value=u).start();return V(()=>{g.stop()}),(u,_)=>e.value!==null?(a(),r(R,{key:0,class:"justify-evenly",padding:""},{default:t(()=>[s(C,null,{default:t(()=>[s(S,{icon:"manage_search",to:"/history",label:"History"})]),_:1}),c("div",A,[c("div",E,[s(z,{bordered:"",class:"rounded-borders",style:{"min-width":"85%"}},{default:t(()=>[s(f,{header:""},{default:t(()=>[l("Runs")]),_:1}),s(y),(a(!0),b(j,null,$(e.value,d=>(a(),b("div",{key:d.id},[s(T,{"tracked-run":d},null,8,["tracked-run"]),s(y)]))),128))]),_:1})])])]),_:1})):(a(),r(R,{key:1,class:"items-center justify-evenly"},{default:t(()=>[l(" Loading ")]),_:1}))}});export{ae as default};
