import{c as q,Q as N,a as P,b as L}from"./index.6308fbe4.js";import{Q as _,b,c as V,d as F}from"./QItem.da5661b8.js";import{Q as U}from"./QPagination.7b717c84.js";import{Q as S}from"./QPage.ac8c533b.js";import{Q as j}from"./use-router-link.cf5520c1.js";import{S as c}from"./api.9a3f3035.js";import{_ as i}from"./StatusCount.9f68250e.js";import{H as I,c as d,I as n,J as g,K as o,d as e,M as h,N as B,P as x,W as p,r as Q,w as $,o as z,k as A,Q as w,R as E,F as H,L as M}from"./index.c79c6525.js";import"./render.c9462489.js";import"./index.b7f28e66.js";import"./QBtn.829a17cb.js";import"./use-form.639e7ccf.js";import"./format.a33550d6.js";import"./QAvatar.53b097c6.js";import"./QChip.4b4082a4.js";const R={class:"text-weight-medium"},T={class:"text-grey-8 q-gutter-xs"},D=I({__name:"TrackedJobListItem",props:{trackedJob:null},setup(J){const t=J,r=d(()=>t.trackedJob.runs.filter(a=>a.status===c.Failed).length),s=d(()=>t.trackedJob.runs.filter(a=>a.status===c.Started).length),m=d(()=>t.trackedJob.runs.filter(a=>a.status===c.Queued).length),k=d(()=>t.trackedJob.runs.filter(a=>a.status===c.Cancelled).length),l=d(()=>t.trackedJob.runs.filter(a=>a.status===c.Succeeded).length);return(a,v)=>(n(),g(V,{clickable:"",to:{path:"/jobs/"+t.trackedJob.alias}},{default:o(()=>[e(_,{avatar:"",top:""},{default:o(()=>[e(j,{name:"account_tree",color:"black",size:"34px"})]),_:1}),e(_,{top:"",class:"col-2 gt-sm"},{default:o(()=>[e(b,{class:"q-mt-sm"},{default:o(()=>[h(B(t.trackedJob.class),1)]),_:1})]),_:1}),e(_,{top:""},{default:o(()=>[e(b,{lines:"1"},{default:o(()=>{var u;return[x("span",R,B((u=t.trackedJob.alias)!=null?u:t.trackedJob.class),1)]}),_:1}),e(b,{caption:"",lines:"5"},{default:o(()=>[e(i,{count:p(m),label:"Queued",color:"primary"},null,8,["count"]),e(i,{count:p(s),label:"Running",color:"info"},null,8,["count"]),e(i,{count:p(k),label:"Cancelled",color:"warning"},null,8,["count"]),e(i,{count:p(r),label:"Failed",color:"negative"},null,8,["count"]),e(i,{count:p(l),label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(_,{top:"",side:""},{default:o(()=>[x("div",T,[e(j,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),K={class:"q-pa-lg flex flex-center"},ce=I({__name:"JobListPage",setup(J){const t=Q(null),r=Q(1);$(r,(l,a)=>{m()});const s=Q(null);function m(){s.value!==null&&s.value.stop(),s.value=q.jobs.search().page(r.value).bypassAuth().listen().onUpdated(l=>t.value=l).start()}z(()=>m()),A(()=>{s.value!==null&&s.value.stop()});function k(l){return l.class}return(l,a)=>{var v;return((v=t.value)==null?void 0:v.total)>0?(n(),g(S,{key:0,class:"justify-evenly"},{default:o(()=>[e(P,null,{default:o(()=>[e(N,{icon:"list",to:"/jobs",label:"Jobs"})]),_:1}),e(F,{class:"rounded-borders q-pa-lg"},{default:o(()=>{var u,y,C;return[e(b,{header:""},{default:o(()=>[h("All Jobs")]),_:1}),e(L),(n(!0),w(H,null,E((y=(u=t.value)==null?void 0:u.data)!=null?y:[],f=>(n(),w("div",{key:k(f)},[e(D,{"tracked-job":f},null,8,["tracked-job"]),e(L)]))),128)),x("div",K,[((C=t.value)==null?void 0:C.total)>0?(n(),g(U,{key:0,input:"","model-value":t.value.current_page,"onUpdate:modelValue":a[0]||(a[0]=f=>r.value=f),max:t.value.last_page},null,8,["model-value","max"])):M("",!0)])]}),_:1})]),_:1})):(n(),g(S,{key:1,class:"items-center justify-evenly"},{default:o(()=>[h(" Loading ")]),_:1}))}}});export{ce as default};
