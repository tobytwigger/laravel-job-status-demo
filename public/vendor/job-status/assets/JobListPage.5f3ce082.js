import{c as j,Q as B,a as L,b as Q}from"./index.637ea310.js";import{Q as i,b as m,c as I,d as q}from"./QItem.c43cac6b.js";import{Q as J}from"./QPage.4bb22602.js";import{Q as y}from"./use-router-link.9a48f7d2.js";import{S as l}from"./api.9a3f3035.js";import{_ as n}from"./StatusCount.30dc738d.js";import{J as S,c as r,K as u,L as _,M as a,d as e,O as b,P as x,Q as v,$ as c,r as w,k as F,R as C,S as N,F as P}from"./index.6030dd21.js";import"./render.ffb77abb.js";import"./index.b7f28e66.js";import"./QAvatar.6ae7fd57.js";import"./QChip.ee8c1a51.js";const V={class:"text-weight-medium"},$={class:"text-grey-8 q-gutter-xs"},z=S({__name:"TrackedJobListItem",props:{trackedJob:null},setup(k){const t=k,p=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Failed).length),f=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Started).length),o=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Queued).length),g=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Cancelled).length),d=r(()=>t.trackedJob.runs.filter(s=>s.status===l.Succeeded).length);return(s,A)=>(u(),_(I,{clickable:"",to:{path:"/jobs/"+t.trackedJob.alias}},{default:a(()=>[e(i,{avatar:"",top:""},{default:a(()=>[e(y,{name:"account_tree",color:"black",size:"34px"})]),_:1}),e(i,{top:"",class:"col-2 gt-sm"},{default:a(()=>[e(m,{class:"q-mt-sm"},{default:a(()=>[b(x(t.trackedJob.class),1)]),_:1})]),_:1}),e(i,{top:""},{default:a(()=>[e(m,{lines:"1"},{default:a(()=>{var h;return[v("span",V,x((h=t.trackedJob.alias)!=null?h:t.trackedJob.class),1)]}),_:1}),e(m,{caption:"",lines:"5"},{default:a(()=>[e(n,{count:c(o),label:"Queued",color:"primary"},null,8,["count"]),e(n,{count:c(f),label:"Running",color:"info"},null,8,["count"]),e(n,{count:c(g),label:"Cancelled",color:"warning"},null,8,["count"]),e(n,{count:c(p),label:"Failed",color:"negative"},null,8,["count"]),e(n,{count:c(d),label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(i,{top:"",side:""},{default:a(()=>[v("div",$,[e(y,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),X=S({__name:"JobListPage",setup(k){const t=w(null);let p=j.jobs.search().bypassAuth().listen().onUpdated(o=>t.value=o).start();F(()=>{p.stop()});function f(o){return o.class}return(o,g)=>t.value!==null?(u(),_(J,{key:0,class:"justify-evenly"},{default:a(()=>[e(L,null,{default:a(()=>[e(B,{icon:"list",to:"/jobs",label:"Jobs"})]),_:1}),e(q,{class:"rounded-borders q-pa-lg"},{default:a(()=>[e(m,{header:""},{default:a(()=>[b("All Jobs")]),_:1}),e(Q),(u(!0),C(P,null,N(t.value,d=>(u(),C("div",{key:f(d)},[e(z,{"tracked-job":d},null,8,["tracked-job"]),e(Q)]))),128))]),_:1})]),_:1})):(u(),_(J,{key:1,class:"items-center justify-evenly"},{default:a(()=>[b(" Loading ")]),_:1}))}});export{X as default};
