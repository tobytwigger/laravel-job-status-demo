import{c as V,Q as C,a as F,b as B}from"./index.6308fbe4.js";import{Q as u,b as d,c as j,d as z}from"./QItem.da5661b8.js";import{Q as A}from"./QPagination.7b717c84.js";import{Q as L}from"./QPage.ac8c533b.js";import{Q as w}from"./use-router-link.cf5520c1.js";import{_ as n}from"./StatusCount.9f68250e.js";import{d as i}from"./dayjs.min.2fad109c.js";import{l as T}from"./localizedFormat.90865b02.js";import{r as U}from"./relativeTime.5c0f92e6.js";import{H as S,c as I,I as o,J as m,K as a,d as e,M as h,N,W as q,P as b,r as _,w as $,o as E,k as H,Q as P,R as M,F as R,L as D}from"./index.c79c6525.js";import"./render.c9462489.js";import"./index.b7f28e66.js";import"./QBtn.829a17cb.js";import"./use-form.639e7ccf.js";import"./format.a33550d6.js";import"./QAvatar.53b097c6.js";import"./QChip.4b4082a4.js";const J={class:"text-weight-medium"},K={class:"text-grey-8 q-gutter-xs"},W=S({__name:"BatchListItem",props:{batch:null},setup(g){const t=g;i.extend(U),i.extend(T);const s=I(()=>i().to(t.batch.created_at)),l=I(()=>t.batch.name!==null&&t.batch.name!==""?t.batch.name:"Batch dispatched at "+i(t.batch.created_at).format("L LTS"));return(p,v)=>(o(),m(j,{clickable:"",to:{path:"/batch/"+t.batch.id}},{default:a(()=>[e(u,{avatar:"",top:""},{default:a(()=>[e(w,{name:"group_work",color:"black",size:"34px"})]),_:1}),e(u,{top:"",class:"col-2 gt-sm"},{default:a(()=>[e(d,{class:"q-mt-sm"},{default:a(()=>[h(N(q(s)),1)]),_:1})]),_:1}),e(u,{top:""},{default:a(()=>[e(d,{lines:"1"},{default:a(()=>[b("span",J,N(q(l)),1)]),_:1}),e(d,{caption:"",lines:"5"},{default:a(()=>[e(n,{count:t.batch.queued,label:"Queued",color:"primary"},null,8,["count"]),e(n,{count:t.batch.started,label:"Running",color:"info"},null,8,["count"]),e(n,{count:t.batch.cancelled,label:"Cancelled",color:"warning"},null,8,["count"]),e(n,{count:t.batch.failed,label:"Failed",color:"negative"},null,8,["count"]),e(n,{count:t.batch.succeeded,label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(u,{top:"",side:""},{default:a(()=>[b("div",K,[e(w,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),G={class:"q-pa-lg flex flex-center"},pe=S({__name:"BatchListPage",setup(g){const t=_(null),s=_(1);$(s,(c,f)=>{p()});const l=_(null);function p(){l.value!==null&&l.value.stop(),l.value=V.batches.search().page(s.value).bypassAuth().listen().onUpdated(c=>t.value=c).start()}E(()=>p()),H(()=>{l.value!==null&&l.value.stop()});function v(c){return c.batch_id}return(c,f)=>{var x;return((x=t.value)==null?void 0:x.total)>0?(o(),m(L,{key:0,class:"justify-evenly"},{default:a(()=>[e(F,null,{default:a(()=>[e(C,{icon:"list",to:"/batch",label:"Batches"})]),_:1}),e(z,{class:"rounded-borders q-pa-lg"},{default:a(()=>{var Q,y,k;return[e(d,{header:""},{default:a(()=>[h("All Batches")]),_:1}),e(B),(o(!0),P(R,null,M((y=(Q=t.value)==null?void 0:Q.data)!=null?y:[],r=>(o(),P("div",{key:v(r)},[e(W,{batch:r},null,8,["batch"]),e(B)]))),128)),b("div",G,[((k=t.value)==null?void 0:k.total)>0?(o(),m(A,{key:0,input:"","model-value":t.value.current_page,"onUpdate:modelValue":f[0]||(f[0]=r=>s.value=r),max:t.value.last_page},null,8,["model-value","max"])):D("",!0)])]}),_:1})]),_:1})):(o(),m(L,{key:1,class:"items-center justify-evenly"},{default:a(()=>[h(" Loading ")]),_:1}))}}});export{pe as default};
