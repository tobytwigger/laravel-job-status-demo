import{c as F,Q as B,b as R,d as I}from"./index.9e71d0d5.js";import{Q as s,b as v,c as y,d as U}from"./QItem.e2c1a51d.js";import{h as $}from"./QPagination.b7890629.js";import{Q as h,R as N}from"./QBtn.765c16fc.js";import{Q as A}from"./QPage.d4ad0916.js";import{S as d}from"./api.9a3f3035.js";import{_ as i}from"./StatusCount.155fe4f6.js";import{H as V,c as p,I as o,J as f,K as t,d as e,M as k,N as q,P as C,U as m,r as x,w as z,o as D,k as E,Q as _,F as H,R as M,L as T,A as P}from"./index.e74ab796.js";import"./render.b530c45a.js";import"./index.b7f28e66.js";import"./format.a33550d6.js";import"./QAvatar.81d43982.js";const K={class:"text-weight-medium"},G={class:"text-grey-8 q-gutter-xs"},O=V({__name:"TrackedJobListItem",props:{trackedJob:null},setup(L){const a=L,u=p(()=>a.trackedJob.runs.filter(l=>l.status===d.Failed).length),n=p(()=>a.trackedJob.runs.filter(l=>l.status===d.Started).length),b=p(()=>a.trackedJob.runs.filter(l=>l.status===d.Queued).length),Q=p(()=>a.trackedJob.runs.filter(l=>l.status===d.Cancelled).length),r=p(()=>a.trackedJob.runs.filter(l=>l.status===d.Succeeded).length);return(l,J)=>(o(),f(y,{clickable:"",to:{path:"/jobs/"+a.trackedJob.alias}},{default:t(()=>[e(s,{avatar:"",top:""},{default:t(()=>[e(h,{name:"account_tree",color:"black",size:"34px"})]),_:1}),e(s,{top:"",class:"col-2 gt-sm"},{default:t(()=>[e(v,{class:"q-mt-sm"},{default:t(()=>[k(q(a.trackedJob.class),1)]),_:1})]),_:1}),e(s,{top:""},{default:t(()=>[e(v,{lines:"1"},{default:t(()=>{var c;return[C("span",K,q((c=a.trackedJob.alias)!=null?c:a.trackedJob.class),1)]}),_:1}),e(v,{caption:"",lines:"5"},{default:t(()=>[e(i,{count:m(b),label:"Queued",color:"primary"},null,8,["count"]),e(i,{count:m(n),label:"Running",color:"info"},null,8,["count"]),e(i,{count:m(Q),label:"Cancelled",color:"warning"},null,8,["count"]),e(i,{count:m(u),label:"Failed",color:"negative"},null,8,["count"]),e(i,{count:m(r),label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(s,{top:"",side:""},{default:t(()=>[C("div",G,[e(h,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),W={key:0},X={class:"q-pa-lg flex flex-center"},Y={key:1},Z={key:2},pe=V({__name:"JobListPage",setup(L){const a=x(null),u=x(1);z(u,(r,l)=>{b()});const n=x(null);function b(){n.value!==null&&n.value.stop(),n.value=F.jobs.search().page(u.value).bypassAuth().listen().onUpdated(r=>a.value=r).start()}D(()=>b()),E(()=>{n.value!==null&&n.value.stop()});function Q(r){return r.class}return(r,l)=>(o(),f(A,{class:"justify-evenly",padding:""},{default:t(()=>[e(R,null,{default:t(()=>[e(B,{icon:"list",to:"/jobs",label:"Jobs"}),e(B,{to:"/jobs",label:"List Jobs"})]),_:1}),e(U,{class:"rounded-borders q-pa-lg"},{default:t(()=>{var J,c,j,w,S;return[e(v,{header:""},{default:t(()=>[k("All Jobs")]),_:1}),((J=a.value)==null?void 0:J.total)>0?(o(),_("div",W,[e(I),(o(!0),_(H,null,M((j=(c=a.value)==null?void 0:c.data)!=null?j:[],g=>(o(),_("div",{key:Q(g)},[e(O,{"tracked-job":g},null,8,["tracked-job"]),e(I)]))),128)),C("div",X,[((w=a.value)==null?void 0:w.total)>0?(o(),f($,{key:0,input:"","model-value":a.value.current_page,"onUpdate:modelValue":l[0]||(l[0]=g=>u.value=g),max:a.value.last_page},null,8,["model-value","max"])):T("",!0)])])):((S=a.value)==null?void 0:S.total)===0?(o(),_("div",Y,[P((o(),f(y,{clickable:""},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(h,{color:"negative",name:"warning"})]),_:1}),e(s,null,{default:t(()=>[k("No jobs found")]),_:1})]),_:1})),[[N]])])):(o(),_("div",Z,[P((o(),f(y,{clickable:""},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(h,{color:"primary",name:"sync"})]),_:1}),e(s,null,{default:t(()=>[k("Loading")]),_:1})]),_:1})),[[N]])]))]}),_:1})]),_:1}))}});export{pe as default};
