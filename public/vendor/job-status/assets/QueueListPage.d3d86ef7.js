import{c as C,Q as N,a as P,b as y}from"./index.6308fbe4.js";import{Q as i,b as d,c as V,d as S}from"./QItem.da5661b8.js";import{Q as U}from"./QPagination.7b717c84.js";import{Q as h}from"./QPage.ac8c533b.js";import{Q as k}from"./use-router-link.cf5520c1.js";import{_ as n}from"./StatusCount.9f68250e.js";import{H as I,I as o,J as m,K as a,d as e,M as f,N as L,P as _,r as p,w as F,o as R,k as $,Q as B,R as j,F as z,L as A}from"./index.c79c6525.js";import"./render.c9462489.js";import"./index.b7f28e66.js";import"./QBtn.829a17cb.js";import"./use-form.639e7ccf.js";import"./format.a33550d6.js";import"./QAvatar.53b097c6.js";import"./QChip.4b4082a4.js";const E={class:"text-weight-medium"},H={class:"text-grey-8 q-gutter-xs"},M=I({__name:"QueueListItem",props:{queue:null},setup(g){const t=g;return(u,r)=>(o(),m(V,{clickable:"",to:{path:"/queues/"+encodeURIComponent(t.queue.name)}},{default:a(()=>[e(i,{avatar:"",top:""},{default:a(()=>[e(k,{name:"queue",color:"black",size:"34px"})]),_:1}),e(i,{top:"",class:"col-2 gt-sm"},{default:a(()=>[e(d,{class:"q-mt-sm"},{default:a(()=>[f(L(t.queue.name),1)]),_:1})]),_:1}),e(i,{top:""},{default:a(()=>[e(d,{lines:"1"},{default:a(()=>[_("span",E,L(t.queue.name),1)]),_:1}),e(d,{caption:"",lines:"5"},{default:a(()=>[e(n,{count:t.queue.queued,label:"Queued",color:"primary"},null,8,["count"]),e(n,{count:t.queue.started,label:"Running",color:"info"},null,8,["count"]),e(n,{count:t.queue.cancelled,label:"Cancelled",color:"warning"},null,8,["count"]),e(n,{count:t.queue.failed,label:"Failed",color:"negative"},null,8,["count"]),e(n,{count:t.queue.succeeded,label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(i,{top:"",side:""},{default:a(()=>[_("div",H,[e(k,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),D={class:"q-pa-lg flex flex-center"},oe=I({__name:"QueueListPage",setup(g){const t=p(null),u=p(null),r=p(1);F(r,(s,l)=>{v()});function v(){u.value!==null&&u.value.stop(),u.value=C.queues.search().page(r.value).bypassAuth().listen().onUpdated(s=>t.value=s).start()}R(()=>v()),$(()=>{u.value!==null&&u.value.stop()});function w(s){var l;return(l=s.name)!=null?l:"default"}return(s,l)=>{var Q;return((Q=t.value)==null?void 0:Q.total)>0?(o(),m(h,{key:0,class:"justify-evenly"},{default:a(()=>[e(P,null,{default:a(()=>[e(N,{icon:"list",to:"/queues",label:"Queues"})]),_:1}),e(S,{class:"rounded-borders q-pa-lg"},{default:a(()=>{var q,b,x;return[e(d,{header:""},{default:a(()=>[f("All Queues")]),_:1}),e(y),(o(!0),B(z,null,j((b=(q=t.value)==null?void 0:q.data)!=null?b:[],c=>(o(),B("div",{key:w(c)},[e(M,{queue:c},null,8,["queue"]),e(y)]))),128)),_("div",D,[((x=t.value)==null?void 0:x.total)>0?(o(),m(U,{key:0,input:"","model-value":t.value.current_page,"onUpdate:modelValue":l[0]||(l[0]=c=>r.value=c),max:t.value.last_page},null,8,["model-value","max"])):A("",!0)])]}),_:1})]),_:1})):(o(),m(h,{key:1,class:"items-center justify-evenly"},{default:a(()=>[f(" Loading ")]),_:1}))}}});export{oe as default};
